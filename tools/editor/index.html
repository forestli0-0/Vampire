<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vampire Survivors - 地图编辑器 Pro</title>
    <link rel="stylesheet" href="style.css">
</head>
<body class="sci-fi-theme">
    <div id="app">
        <!-- 侧边工具栏 -->
        <aside id="sidebar">
            <div class="logo">MAP EDITOR <span>PRO</span></div>
            
            <section class="tools-section">
                <h3>工具箱</h3>
                <div class="tool-grid">
                    <button id="tool-brush" class="tool-btn active" title="画笔 (B)">🖌️</button>
                    <button id="tool-eraser" class="tool-btn" title="橡皮擦 (E)">🧹</button>
                    <button id="tool-fill" class="tool-btn" title="油漆桶 (G)">🪣</button>
                    <button id="tool-rect" class="tool-btn" title="矩形填充 (R)">⬛</button>
                    <button id="tool-picker" class="tool-btn" title="吸管 (I)">🧪</button>
                </div>
            </section>

            <section class="history-section">
                <div class="action-btns">
                    <button id="undo-btn" title="撤销 (Ctrl+Z)">↩️</button>
                    <button id="redo-btn" title="重做 (Ctrl+Y)">↪️</button>
                </div>
            </section>

            <section class="palette-section">
                <h3>地块选择器</h3>
                <div id="tileset-container">
                    <canvas id="palette-canvas"></canvas>
                </div>
                <div id="selected-info">
                    当前 ID: <span id="current-tile-id">0</span>
                </div>
            </section>

            <section class="export-section">
                <button id="export-btn" class="primary-btn">导出 Lua 代码</button>
                <button id="save-json-btn" class="secondary-btn">保存项目 (JSON)</button>
                <button id="load-json-btn" class="secondary-btn">加载项目</button>
            </section>
        </aside>

        <!-- 主编辑区 -->
        <main id="editor-viewport">
            <div id="canvas-container">
                <canvas id="main-canvas"></canvas>
                <div id="grid-overlay"></div>
            </div>
            
            <!-- 状态栏 -->
            <footer id="status-bar">
                <div class="coords">坐标: <span id="pos-x">0</span>, <span id="pos-y">0</span></div>
                <div class="zoom">缩放: <span id="zoom-level">100%</span></div>
                <div class="hints">空格+拖动: 平移 | Shift+滚轮: 缩放</div>
            </footer>
        </main>
    </div>

    <!-- 弹窗：代码导出 -->
    <div id="modal-export" class="modal">
        <div class="modal-content">
            <h3>导出 Lua 代码</h3>
            <p>请将下方代码复制到 <code>world/hub.lua</code> 的 <code>tiles</code> 数组中：</p>
            <textarea id="export-code" readonly></textarea>
            <div class="modal-btns">
                <button id="copy-btn">复制到剪贴板</button>
                <button id="close-btn">关闭</button>
            </div>
        </div>
    </div>

    <script src="editor.js"></script>
</body>
</html>
