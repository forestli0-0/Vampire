# 经济与节奏设计（Economy & Pacing）

> 核心目标：40 分钟通关的肉鸽节奏，前期爽快、中期构筑、后期爆发。

---

## 1) 已拍板参数

| 参数 | 数值 | 备注 |
|------|------|------|
| **一局时长** | 40 分钟 | 探索 + Boss 战 |
| **总强化数量** | 12–15 个 | 包括武器升级、被动、Augment、宠物模块 |
| **强化频率** | 每 2–3 房间 / 每 3 分钟 | 约 13 次机会 |
| **开局投资** | 前 5 分钟 ≥ 30% 资源 | 约 4–5 个强化，快速成型 |

---

## 2) 时间轴推演（基于 40 分钟）

| 阶段 | 时间 | 房间数 | 累计强化 | 设计目标 |
|------|------|--------|----------|----------|
| **开局（爽快期）** | 0–5 min | 2–3 房 | 4–5 个 | 快速拿到核心能力，确立本局路线 |
| **前期（构筑期）** | 5–15 min | 4–6 房 | 8–9 个 | 围绕路线补强/修正 |
| **中期（成型期）** | 15–30 min | 6–8 房 | 12–13 个 | Build 基本成型，应对更强敌人 |
| **后期（爆发期）** | 30–40 min | Boss 章节 | 14–15 个 | 最后微调 + Boss 战 |

---

## 3) 强化来源分配（避免奖励溢出）

### 3.1 强化类型拆分

| 类型 | 每局预算 | 来源 |
|------|----------|------|
| **武器/被动升级** | 6–8 个 | 升级三选一（房间结算触发） |
| **Augment（机制）** | 4–5 个 | 升级池 or 精英掉落 or 商店 |
| **临时增益** | 2–3 个 | 事件选择 or 祭坛 |

> **宠物模块不计入强化预算**：因为槽位有限（例如 3 个），掉落主要提供"替换选择"与获得感，不影响核心战力曲线。

### 3.2 来源职责明确

| 来源 | 给什么 | 不给什么 |
|------|--------|----------|
| **清房宝箱** | 金币、少量 XP | 不直接给强化 |
| **精英击杀** | Augment / 宠物模块 chip | 不给普通升级 |
| **Boss 击杀** | 章节结算大奖励（多选一） | — |
| **商店** | 可控选择（花钱买）| 不免费 |
| **事件** | 有代价的交易 | 不白送 |

---

## 4) 升级触发机制（建议调整）

### 4.1 经验系统改造

当前问题：经验→升级→三选一 会导致"刷怪越多选择越多"，节奏失控。

**建议方案（二选一）**：

**A) 经验淡化**
- 经验只提供"小成长"（血量/移速/拾取范围的微幅提升）
- 三选一来源改为：**房间结算 + 精英 + Boss**，数量固定可控

**B) 经验门槛递增**
- 每次升级所需经验大幅递增（类似 VS 后期）
- 控制总升级次数自然收敛到 12–15 次

### 4.2 开局 5 分钟保底

为确保"30% 资源在前 5 分钟"，需要：
1. **第 1 房结算**：必定触发 1 次升级 + 1 次精英必掉 Augment
2. **第 2 房结算**：1 次升级 + 商店开放（可买宠物模块）
3. **前 5 分钟内**：保底 4 次强化机会（升级 2 + Augment 1 + 模块 1）

---

## 5) 房间结构建议（匹配节奏）

### 5.1 单章节结构（约 12–15 分钟）

```
章节 1（森林）
├── Stage 1-1：3–4 Sector（清房 + 精英）
├── Stage 1-2：3–4 Sector（探索 + 事件/商店）
└── Stage 1-3：Boss 竞技场
```

### 5.2 完整 Run（3 章节 = 40 分钟）

| 章节 | 时间 | 房间数 | 强化分配 |
|------|------|--------|----------|
| **Chapter 1** | 0–12 min | 8–10 Sector | 5 个（30%+） |
| **Chapter 2** | 12–28 min | 8–10 Sector | 5–6 个 |
| **Chapter 3** | 28–40 min | 6–8 Sector + Boss | 4 个 |

---

## 6) 待实现任务

- [ ] 调整 `rooms.lua` 的结算逻辑，按阶段分配奖励
- [ ] 修改 `director.lua` / `mission.lua` 的升级触发条件
- [ ] 实现"开局保底"机制（前 2 房必定产出）
- [ ] 精英掉落表更新（必掉 Augment / 模块 chip）
- [ ] 商店价格表设计（与金币预算匹配）

---

## 7) 已拍板决策（本轮确认）

| 问题 | 决策 |
|------|------|
| 宠物模块是否算入预算 | ❌ 不算入，槽位有限只提供选择感 |
| 职业差异影响开局保底 | ✅ 职业决定开局保底内容 |
| 经验系统改造 | ⏸️ 暂不改动，等职业系统落地后一起设计 |

---

## 8) 下一步：职业系统前置

当前现状：
- 角色只有血量，没有职业/技能
- 经验系统已改为金币掉落（`rooms.lua` 中实现）
- 升级三选一的触发时机和来源需要和职业挂钩

**职业系统是经济设计的前置条件**，需要先规划：
1. 职业如何影响开局武器/Augment 权重
2. 职业是否有专属技能/被动
3. 经验系统是否复用为"职业成长"（类似 Hades 的镜子天赋）

