已实现功能

玩家系统：移动、受伤无敌时间、HP/XP/等级与溢出升级队列，拾取范围。
武器/被动：魔杖、斧头（穿透限单次命中）、大蒜光环；被动提升伤害、冷却、移速；武器升级与进化（魔杖→圣魔杖，斧头→死亡旋风）；新增油瓶/火杖/冰环/战锤/飞刀等状态武器，投射物/光环携带 effectType，武器/被动改用 tags 匹配加成。
状态/协同：敌人状态表（冻结/上油/感电/流血叠层/灼烧计时）；冻结+重击碎裂，流血 10 层爆炸，油+火点燃灼烧，感电连锁伤害并画链路，受状态的颜色/描边反馈。
调试/测试：love.load 默认给予油瓶+火杖组合，注释后可切换冰环+战锤；F3 调试菜单（Tab 切 weapon/passive/xp/enemy，左右可增减等级）可随时调整装备与刷怪。
敌人：骷髅/蝙蝠/植物（远程射击），精英敌人、软碰撞分离，受击闪白；植物子弹使用贴图并按方向旋转。
投射物：玩家子弹、斧头重力弧线，敌方子弹；碰撞、寿命、穿透规则，子弹朝向随飞行角度旋转。
掉落/拾取：宝石吸附与拾取，宝箱（进化或+500 XP），地面道具（鸡腿回血、磁铁全图吸宝石、炸弹清屏）。
升级系统：随机 3 选 1，升级/被动应用，多级升级排队处理。
导演/刷怪：时间驱动精英事件，随时间/等级调节刷怪，2 分钟后引入植物。
视效/音效：平铺背景，玩家动画占位帧，受击屏幕抖动、敌人闪白；射击/受击/宝石拾取音效（含占位波形）；音效播放安全检查，缺素材时打印提示避免崩溃。
HUD/状态：HP/XP 条、等级、计时器、升级界面，游戏结束重开。

问题清单（快速检查）

- [已修复] 武器进化后无开火：`weapons.update` 仅处理魔杖/斧头/大蒜，进化成圣魔杖或死亡旋风后没有发射逻辑，宝箱进化会让主武器直接消失。
- [已修复] 进化后基础武器仍会出现在升级池：进化时移除了魔杖/斧头实例，但未屏蔽其条目，后续升级选项可能再次出现基础武器，浪费选择。
- [已修复] 斧头/死亡旋风面积加成缺失：catalog 中的 `area` 值没有在投射物生成或碰撞时使用，斧头升级的范围成长未生效。
- [已修复] 受伤无敌缺少反馈：有动画时不再闪烁，invincibleTimer 期间玩家缺乏可视提示，容易误判是否能被击中。
- [已修复] 升级界面提前出现进化武器：未满足条件仍出现圣魔杖、死亡旋风。
- [已修复] 玩家死亡未进入 Game Over：HP 归零后屏幕抖动持续、角色闪烁，未提示重开。
- [已修复] 斧头/魔杖满级后无进化可选：满足进化条件时，升级界面会给出进化体选项；不再卡住进化。
- [已修复] 冰冻无持续时间：`enemies.applyStatus` 现在接受 effectData 并使用 `ice_ring` 的 duration 设定冻结计时，`enemies.update` 负责解冻与速度恢复，冰环不再永久定身。
- [已修复] 感电链路无法触发：新增武器 Static Orb（静电球）附带 STATIC 效果，投射物命中会施加感电，触发 `enemies.update` 的连锁伤害与连线绘制。
- [已修复] 油瓶无限穿透：命中后不再穿透，给命中目标及 80px 范围敌人施加 6s 上油后消失，超时自动失效。
- [已修复] 上油/点燃过强：火球溅射半径收窄，灼烧 DPS 下调，溅射只点燃已上油敌人，不再对溅射目标额外瞬间伤害。
- [已修复] Static Orb 伤害过高：基础伤害下调，凸显链路伤害体验。
- [已修复] 视觉反馈：感电链路加粗提亮；冰环/大蒜使用贴图按半径缩放，蒜芯透明度提高。
- [已修复] 敌人/植物子弹贴图与大小：支持敌弹贴图（plant_bullet）按方向旋转，植物子弹放大 2x。
- [已修复] 子弹朝向错乱：玩家/敌人子弹绘制跟随飞行角度旋转，尺寸恢复正常。
可扩展方向

资源：替换占位动画/纹理/音效为正式素材，增加不同帧率/方向的角色与敌人动画。
平衡与多样性：更多武器/被动/进化组合，植物射速/子弹行为调整，难度曲线/波次设计。
反馈与特效：更丰富的击中特效、死亡爆炸、UI 动效，粒子系统。
系统层：存档/解锁、角色选择（初始属性/武器不同）、成就。
关卡/地图：不同地形或障碍物，更多敌人种类与精英技能。
性能：空间分区优化碰撞与分离检查，更大刷怪密度。

待办/下一步

- [新目标] 内容编辑器/资源系统：以数据驱动（Lua/JSON 表）管理武器/被动/敌人/波次和贴图/音频路径，支持在编辑器中切换素材、调整数值并热加载；当前先服务已有内容，不增加新武器/怪。
- [高优先] 平衡与节奏：基于现有武器/敌人重新调伤害、冷却、刷怪速度，设定时间轴（前 0-5 分钟、5-10 分钟等）的刷怪与精英频率，确保体验类似 VS。
- [高优先] 资源落地：整理已有占位/素材的加载表，补齐敌弹贴图与尺寸规范，统一阴影/描边/旋转规则；可在编辑器里选取贴图或回落占位。
- [中优先] 长线/存档草案：设计角色选择与解锁条件、基础数值差异、进度存档格式（可先做伪存档接口）。
- [低优先] UI/反馈打磨：升级/掉落/受击的提示与动效，HUD 样式统一，等平衡和编辑器完成后推进。
